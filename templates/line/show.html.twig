{% extends 'base.html.twig' %}

{% block title %}Ligne {{ line.number }} - √Ä la bonne station{% endblock %}

{% block body %}
<div class="w-full px-4 py-6">
    {# En-t√™te de la ligne #}
    <div class="bg-white rounded-xl shadow-lg p-8 mb-8">
        <div class="flex items-center justify-between mb-6">
            <div class="flex items-center space-x-6">
                <div class="inline-flex items-center justify-center w-32 h-32 rounded-full text-white font-bold text-7xl"
                     style="background-color: {{ line.color }}; color: {{ line.textColor }};">
                    {% if 'bis' in line.number %}
                        {{ line.number|replace({'bis': ''}) }}<span class="text-4xl">bis</span>
                    {% else %}
                        {{ line.number }}
                    {% endif %}
                </div>
                <div>
                    <h1 class="text-4xl font-bold text-gray-900 mb-2">Ligne {{ line.number }}</h1>
                    <p class="text-xl text-gray-600">{{ line.name }}</p>
                    <p class="text-base text-gray-500 mt-2">{{ stats.total }} stations au total</p>
                </div>
            </div>
            <a href="{{ path('app_lines') }}" class="text-blue-600 hover:text-blue-800 font-medium text-lg">
                ‚Üê Retour aux lignes
            </a>
        </div>

        {# Statistiques de progression #}
        <div class="mt-8 grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="bg-blue-50 rounded-xl p-6 relative overflow-hidden">
                <div class="flex items-center justify-between mb-4">
                    <div>
                        <p class="text-base text-gray-600 mb-2">Stations pass√©es</p>
                        <p class="text-4xl font-bold text-blue-600">{{ stats.passed }}/{{ stats.total }}</p>
                    </div>
                    <div class="text-6xl">üö∂</div>
                </div>
                <div class="mt-4 bg-gray-200 rounded-full h-6 overflow-hidden relative">
                    <div class="bg-blue-600 h-6 rounded-full transition-all duration-500 flex items-center justify-end pr-2" 
                         style="width: {{ stats.passedPercentage }}%">
                        {% if stats.passedPercentage > 10 %}
                            <span class="text-3xl leading-none">üöá</span>
                        {% endif %}
                    </div>
                    {% if stats.passedPercentage <= 10 and stats.passedPercentage > 0 %}
                        <div class="absolute top-0 left-0 h-6 flex items-center pl-2">
                            <span class="text-3xl leading-none">üöá</span>
                        </div>
                    {% endif %}
                </div>
                <p class="text-sm text-gray-600 mt-2">{{ stats.passedPercentage }}%</p>
            </div>

            <div class="bg-green-50 rounded-xl p-6 relative overflow-hidden">
                <div class="flex items-center justify-between mb-4">
                    <div>
                        <p class="text-base text-gray-600 mb-2">Stations visit√©es</p>
                        <p class="text-4xl font-bold text-green-600">{{ stats.stopped }}/{{ stats.total }}</p>
                    </div>
                    <div class="text-6xl">‚úÖ</div>
                </div>
                <div class="mt-4 bg-gray-200 rounded-full h-6 overflow-hidden relative">
                    <div class="bg-green-600 h-6 rounded-full transition-all duration-500 flex items-center justify-end pr-2" 
                         style="width: {{ stats.stoppedPercentage }}%">
                        {% if stats.stoppedPercentage > 10 %}
                            <span class="text-3xl leading-none">üöá</span>
                        {% endif %}
                    </div>
                    {% if stats.stoppedPercentage <= 10 and stats.stoppedPercentage > 0 %}
                        <div class="absolute top-0 left-0 h-6 flex items-center pl-2">
                            <span class="text-3xl leading-none">üöá</span>
                        </div>
                    {% endif %}
                </div>
                <p class="text-sm text-gray-600 mt-2">{{ stats.stoppedPercentage }}%</p>
            </div>
        </div>
    </div>

    {# Vue verticale de la ligne de m√©tro #}
    <div class="bg-white rounded-xl shadow-lg p-10">
        <div class="mb-8">
            <h2 class="text-3xl font-bold text-gray-900 mb-3">Parcours de la ligne</h2>
            <p class="text-lg text-gray-600">Cliquez sur les cases pour marquer votre progression</p>
        </div>

        {# Ligne verticale avec stations #}
        <div class="relative">
            {# S√©parateur pour la branche Saint-Denis (ligne 13) #}
            {% if hasFork and branchStations['saint-denis'] is defined %}
                <div class="my-6 flex justify-center">
                    <span class="inline-block bg-purple-100 text-purple-800 px-6 py-3 rounded-xl font-semibold text-lg shadow-md">
                        ‚Üí Branche Saint-Denis
                    </span>
                </div>
            {% endif %}

            {# Branche Saint-Denis (pour ligne 13) #}
            {% if hasFork and branchStations['saint-denis'] is defined %}
                {% for station in branchStations['saint-denis'] %}
                    {% set isTerminus = loop.first %}
                    
                    <div class="relative flex items-center mb-3"
                         data-controller="station"
                         data-station-id="{{ station.id }}"
                         data-station-line-id="{{ line.id }}">
                        
                        <div class="w-16 text-right pr-6 flex items-center justify-end">
                            {% if isTerminus %}
                                <span class="text-3xl">üöá</span>
                            {% else %}
                                <span class="text-base font-bold text-gray-400">{{ station.position }}</span>
                            {% endif %}
                        </div>

                        <div class="relative flex flex-col items-center" style="width: 50px; height: 70px;">
                            {% if not loop.first %}
                                <div class="absolute bottom-1/2 left-1/2 transform -translate-x-1/2 w-1" 
                                     style="background-color: {{ line.color }}; height: 50%; top: 0;"></div>
                            {% endif %}

                            <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-10 w-7 h-7 rounded-full border-4 transition-all duration-200 hover:scale-125 cursor-pointer
                                        {% if isTerminus %}
                                            bg-gray-900
                                        {% elseif userStations[station.id] is defined and userStations[station.id].stopped %}
                                            bg-green-500
                                        {% elseif userStations[station.id] is defined and userStations[station.id].passed %}
                                            bg-blue-400
                                        {% else %}
                                            bg-white
                                        {% endif %}"
                                 style="border-color: {{ line.color }};">
                            </div>

                            {% if not loop.last %}
                                <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 w-1" 
                                     style="background-color: {{ line.color }}; height: 50%; bottom: 0;"></div>
                            {% endif %}
                        </div>

                        <div class="flex-grow flex items-center justify-between bg-purple-50 hover:bg-purple-100 rounded-xl px-6 py-4 ml-6 transition duration-150 border-l-4 border-purple-400">
                            <div class="flex-grow">
                                <h3 class="text-lg font-medium text-gray-900">
                                    {{ station.name }}
                                    {% if isTerminus %}
                                        <span class="text-sm text-gray-500 ml-3">(Terminus)</span>
                                    {% endif %}
                                </h3>
                            </div>

                            <div class="flex items-center space-x-6 ml-6">
                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input 
                                        type="checkbox" 
                                        {% if userStations[station.id] is defined and userStations[station.id].passed %}checked{% endif %}
                                        data-station-target="passedCheckbox"
                                        data-action="change->station#togglePassed"
                                        class="w-5 h-5 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2 cursor-pointer"
                                    >
                                    <span class="text-base text-gray-700 whitespace-nowrap">üö∂ Pass√©</span>
                                </label>

                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input 
                                        type="checkbox" 
                                        {% if userStations[station.id] is defined and userStations[station.id].stopped %}checked{% endif %}
                                        data-station-target="stoppedCheckbox"
                                        data-action="change->station#toggleStopped"
                                        class="w-5 h-5 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500 focus:ring-2 cursor-pointer"
                                    >
                                    <span class="text-base text-gray-700 whitespace-nowrap">‚úÖ Visit√©</span>
                                </label>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            {% endif %}

            {# S√©parateur pour la branche Asni√®res (ligne 13) #}
            {% if hasFork and branchStations['asnieres'] is defined %}
                <div class="my-6 flex justify-center">
                    <span class="inline-block bg-blue-100 text-blue-800 px-6 py-3 rounded-xl font-semibold text-lg shadow-md">
                        ‚Üí Branche Asni√®res
                    </span>
                </div>
            {% endif %}

            {# Branche Asni√®res (pour ligne 13) #}
            {% if hasFork and branchStations['asnieres'] is defined %}
                {% for station in branchStations['asnieres'] %}
                    {% set isTerminus = loop.first %}
                    
                    <div class="relative flex items-center mb-3"
                         data-controller="station"
                         data-station-id="{{ station.id }}"
                         data-station-line-id="{{ line.id }}">
                        
                        <div class="w-16 text-right pr-6 flex items-center justify-end">
                            {% if isTerminus %}
                                <span class="text-3xl">üöá</span>
                            {% else %}
                                <span class="text-base font-bold text-gray-400">{{ station.position }}</span>
                            {% endif %}
                        </div>

                        <div class="relative flex flex-col items-center" style="width: 50px; height: 70px;">
                            {% if not loop.first %}
                                <div class="absolute bottom-1/2 left-1/2 transform -translate-x-1/2 w-1" 
                                     style="background-color: {{ line.color }}; height: 50%; top: 0;"></div>
                            {% endif %}

                            <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-10 w-7 h-7 rounded-full border-4 transition-all duration-200 hover:scale-125 cursor-pointer
                                        {% if isTerminus %}
                                            bg-gray-900
                                        {% elseif userStations[station.id] is defined and userStations[station.id].stopped %}
                                            bg-green-500
                                        {% elseif userStations[station.id] is defined and userStations[station.id].passed %}
                                            bg-blue-400
                                        {% else %}
                                            bg-white
                                        {% endif %}"
                                 style="border-color: {{ line.color }};">
                            </div>

                            {% if not loop.last %}
                                <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 w-1" 
                                     style="background-color: {{ line.color }}; height: 50%; bottom: 0;"></div>
                            {% endif %}
                        </div>

                        <div class="flex-grow flex items-center justify-between bg-blue-50 hover:bg-blue-100 rounded-xl px-6 py-4 ml-6 transition duration-150 border-l-4 border-blue-400">
                            <div class="flex-grow">
                                <h3 class="text-lg font-medium text-gray-900">
                                    {{ station.name }}
                                    {% if isTerminus %}
                                        <span class="text-sm text-gray-500 ml-3">(Terminus)</span>
                                    {% endif %}
                                </h3>
                            </div>

                            <div class="flex items-center space-x-6 ml-6">
                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input 
                                        type="checkbox" 
                                        {% if userStations[station.id] is defined and userStations[station.id].passed %}checked{% endif %}
                                        data-station-target="passedCheckbox"
                                        data-action="change->station#togglePassed"
                                        class="w-5 h-5 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2 cursor-pointer"
                                    >
                                    <span class="text-base text-gray-700 whitespace-nowrap">üö∂ Pass√©</span>
                                </label>

                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input 
                                        type="checkbox" 
                                        {% if userStations[station.id] is defined and userStations[station.id].stopped %}checked{% endif %}
                                        data-station-target="stoppedCheckbox"
                                        data-action="change->station#toggleStopped"
                                        class="w-5 h-5 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500 focus:ring-2 cursor-pointer"
                                    >
                                    <span class="text-base text-gray-700 whitespace-nowrap">‚úÖ Visit√©</span>
                                </label>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            {% endif %}

            {# Toutes les stations (mainStations) #}
            {% if mainStations is defined %}
                {% for station in mainStations %}
                    {# Un terminus est la premi√®re station OU la derni√®re station SI ce n'est pas une fourche #}
                    {% set isTerminus = (loop.first and station.branch != 'fork') or (loop.last and station.branch != 'fork') %}
                    
                    <div class="relative flex items-center mb-3"
                         data-controller="station"
                         data-station-id="{{ station.id }}"
                         data-station-line-id="{{ line.id }}">
                        
                        <div class="w-16 text-right pr-6 flex items-center justify-end">
                            {% if isTerminus %}
                                <span class="text-3xl">üöá</span>
                            {% else %}
                                <span class="text-base font-bold text-gray-400">{{ station.position }}</span>
                            {% endif %}
                        </div>

                        <div class="relative flex flex-col items-center" style="width: 50px; height: 70px;">
                            {% if not loop.first %}
                                <div class="absolute bottom-1/2 left-1/2 transform -translate-x-1/2 w-1" 
                                     style="background-color: {{ line.color }}; height: 50%; top: 0;"></div>
                            {% endif %}

                            <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-10 w-7 h-7 rounded-full border-4 transition-all duration-200 hover:scale-125 cursor-pointer
                                        {% if isTerminus %}
                                            bg-gray-900
                                        {% elseif userStations[station.id] is defined and userStations[station.id].stopped %}
                                            bg-green-500
                                        {% elseif userStations[station.id] is defined and userStations[station.id].passed %}
                                            bg-blue-400
                                        {% else %}
                                            bg-white
                                        {% endif %}"
                                 style="border-color: {{ line.color }};">
                            </div>

                            {% if not loop.last %}
                                <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 w-1" 
                                     style="background-color: {{ line.color }}; height: 50%; bottom: 0;"></div>
                            {% endif %}
                        </div>

                        <div class="flex-grow flex items-center justify-between bg-gray-50 hover:bg-gray-100 rounded-xl px-6 py-4 ml-6 transition duration-150">
                            <div class="flex-grow">
                                <h3 class="text-lg font-medium text-gray-900">
                                    {{ station.name }}
                                    {% if isTerminus %}
                                        <span class="text-sm text-gray-500 ml-3">(Terminus)</span>
                                    {% endif %}
                                    {% if station.branch == 'direction' %}
                                        {% if line.number == '7bis' %}
                                            <span class="text-sm text-blue-600 ml-3">(direction Pr√©-Saint-Gervais)</span>
                                        {% elseif line.number == '10' %}
                                            <span class="text-sm text-blue-600 ml-3">(direction Gare d'Austerlitz)</span>
                                        {% endif %}
                                    {% endif %}
                                    {% if station.branch == 'retour' %}
                                        {% if line.number == '7bis' %}
                                            <span class="text-sm text-purple-600 ml-3">(direction Louis Blanc)</span>
                                        {% elseif line.number == '10' %}
                                            <span class="text-sm text-purple-600 ml-3">(direction Boulogne)</span>
                                        {% endif %}
                                    {% endif %}
                                    {% if station.branch == 'fork' %}
                                        <span class="text-xs text-orange-600 ml-2 font-semibold">‚ö†Ô∏è Fourche</span>
                                    {% endif %}
                                </h3>
                            </div>

                            <div class="flex items-center space-x-6 ml-6">
                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input 
                                        type="checkbox" 
                                        {% if userStations[station.id] is defined and userStations[station.id].passed %}checked{% endif %}
                                        data-station-target="passedCheckbox"
                                        data-action="change->station#togglePassed"
                                        class="w-5 h-5 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2 cursor-pointer"
                                    >
                                    <span class="text-base text-gray-700 whitespace-nowrap">üö∂ Pass√©</span>
                                </label>

                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input 
                                        type="checkbox" 
                                        {% if userStations[station.id] is defined and userStations[station.id].stopped %}checked{% endif %}
                                        data-station-target="stoppedCheckbox"
                                        data-action="change->station#toggleStopped"
                                        class="w-5 h-5 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500 focus:ring-2 cursor-pointer"
                                    >
                                    <span class="text-base text-gray-700 whitespace-nowrap">‚úÖ Visit√©</span>
                                </label>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            {% endif %}

            {# S√©parateur pour la branche Villejuif (ligne 7) #}
            {% if hasFork and branchStations['villejuif'] is defined %}
                <div class="my-6 flex justify-center">
                    <span class="inline-block bg-purple-100 text-purple-800 px-6 py-3 rounded-xl font-semibold text-lg shadow-md">
                        ‚Üí Branche Villejuif
                    </span>
                </div>
            {% endif %}

            {# Branche Villejuif (pour ligne 7) #}
            {% if hasFork and branchStations['villejuif'] is defined %}
                {% for station in branchStations['villejuif'] %}
                    {% set isTerminus = loop.last %}
                    
                    <div class="relative flex items-center mb-3"
                         data-controller="station"
                         data-station-id="{{ station.id }}"
                         data-station-line-id="{{ line.id }}">
                        
                        <div class="w-16 text-right pr-6 flex items-center justify-end">
                            {% if isTerminus %}
                                <span class="text-3xl">üöá</span>
                            {% else %}
                                <span class="text-base font-bold text-gray-400">{{ station.position }}</span>
                            {% endif %}
                        </div>

                        <div class="relative flex flex-col items-center" style="width: 50px; height: 70px;">
                            {% if not loop.first %}
                                <div class="absolute bottom-1/2 left-1/2 transform -translate-x-1/2 w-1" 
                                     style="background-color: {{ line.color }}; height: 50%; top: 0;"></div>
                            {% endif %}

                            <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-10 w-7 h-7 rounded-full border-4 transition-all duration-200 hover:scale-125 cursor-pointer
                                        {% if isTerminus %}
                                            bg-gray-900
                                        {% elseif userStations[station.id] is defined and userStations[station.id].stopped %}
                                            bg-green-500
                                        {% elseif userStations[station.id] is defined and userStations[station.id].passed %}
                                            bg-blue-400
                                        {% else %}
                                            bg-white
                                        {% endif %}"
                                 style="border-color: {{ line.color }};">
                            </div>

                            {% if not loop.last %}
                                <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 w-1" 
                                     style="background-color: {{ line.color }}; height: 50%; bottom: 0;"></div>
                            {% endif %}
                        </div>

                        <div class="flex-grow flex items-center justify-between bg-purple-50 hover:bg-purple-100 rounded-xl px-6 py-4 ml-6 transition duration-150 border-l-4 border-purple-400">
                            <div class="flex-grow">
                                <h3 class="text-lg font-medium text-gray-900">
                                    {{ station.name }}
                                    {% if isTerminus %}
                                        <span class="text-sm text-gray-500 ml-3">(Terminus)</span>
                                    {% endif %}
                                </h3>
                            </div>

                            <div class="flex items-center space-x-6 ml-6">
                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input 
                                        type="checkbox" 
                                        {% if userStations[station.id] is defined and userStations[station.id].passed %}checked{% endif %}
                                        data-station-target="passedCheckbox"
                                        data-action="change->station#togglePassed"
                                        class="w-5 h-5 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2 cursor-pointer"
                                    >
                                    <span class="text-base text-gray-700 whitespace-nowrap">üö∂ Pass√©</span>
                                </label>

                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input 
                                        type="checkbox" 
                                        {% if userStations[station.id] is defined and userStations[station.id].stopped %}checked{% endif %}
                                        data-station-target="stoppedCheckbox"
                                        data-action="change->station#toggleStopped"
                                        class="w-5 h-5 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500 focus:ring-2 cursor-pointer"
                                    >
                                    <span class="text-base text-gray-700 whitespace-nowrap">‚úÖ Visit√©</span>
                                </label>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            {% endif %}

            {# S√©parateur pour la branche Ivry (ligne 7) #}
            {% if hasFork and branchStations['ivry'] is defined %}
                <div class="my-6 flex justify-center">
                    <span class="inline-block bg-blue-100 text-blue-800 px-6 py-3 rounded-xl font-semibold text-lg shadow-md">
                        ‚Üí Branche Ivry
                    </span>
                </div>
            {% endif %}

            {# Branche Ivry (pour ligne 7) #}
            {% if hasFork and branchStations['ivry'] is defined %}
                {% for station in branchStations['ivry'] %}
                    {% set isTerminus = loop.last %}
                    
                    <div class="relative flex items-center mb-3"
                         data-controller="station"
                         data-station-id="{{ station.id }}"
                         data-station-line-id="{{ line.id }}">
                        
                        <div class="w-16 text-right pr-6 flex items-center justify-end">
                            {% if isTerminus %}
                                <span class="text-3xl">üöá</span>
                            {% else %}
                                <span class="text-base font-bold text-gray-400">{{ station.position }}</span>
                            {% endif %}
                        </div>

                        <div class="relative flex flex-col items-center" style="width: 50px; height: 70px;">
                            {% if not loop.first %}
                                <div class="absolute bottom-1/2 left-1/2 transform -translate-x-1/2 w-1" 
                                     style="background-color: {{ line.color }}; height: 50%; top: 0;"></div>
                            {% endif %}

                            <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-10 w-7 h-7 rounded-full border-4 transition-all duration-200 hover:scale-125 cursor-pointer
                                        {% if isTerminus %}
                                            bg-gray-900
                                        {% elseif userStations[station.id] is defined and userStations[station.id].stopped %}
                                            bg-green-500
                                        {% elseif userStations[station.id] is defined and userStations[station.id].passed %}
                                            bg-blue-400
                                        {% else %}
                                            bg-white
                                        {% endif %}"
                                 style="border-color: {{ line.color }};">
                            </div>

                            {% if not loop.last %}
                                <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 w-1" 
                                     style="background-color: {{ line.color }}; height: 50%; bottom: 0;"></div>
                            {% endif %}
                        </div>

                        <div class="flex-grow flex items-center justify-between bg-blue-50 hover:bg-blue-100 rounded-xl px-6 py-4 ml-6 transition duration-150 border-l-4 border-blue-400">
                            <div class="flex-grow">
                                <h3 class="text-lg font-medium text-gray-900">
                                    {{ station.name }}
                                    {% if isTerminus %}
                                        <span class="text-sm text-gray-500 ml-3">(Terminus)</span>
                                    {% endif %}
                                </h3>
                            </div>

                            <div class="flex items-center space-x-6 ml-6">
                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input 
                                        type="checkbox" 
                                        {% if userStations[station.id] is defined and userStations[station.id].passed %}checked{% endif %}
                                        data-station-target="passedCheckbox"
                                        data-action="change->station#togglePassed"
                                        class="w-5 h-5 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2 cursor-pointer"
                                    >
                                    <span class="text-base text-gray-700 whitespace-nowrap">üö∂ Pass√©</span>
                                </label>

                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input 
                                        type="checkbox" 
                                        {% if userStations[station.id] is defined and userStations[station.id].stopped %}checked{% endif %}
                                        data-station-target="stoppedCheckbox"
                                        data-action="change->station#toggleStopped"
                                        class="w-5 h-5 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500 focus:ring-2 cursor-pointer"
                                    >
                                    <span class="text-base text-gray-700 whitespace-nowrap">‚úÖ Visit√©</span>
                                </label>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            {% endif %}
        </div>

        {# L√©gende #}
        <div class="mt-10 flex justify-center items-center space-x-10 text-base">
            <div class="flex items-center space-x-3">
                <div class="w-5 h-5 rounded-full border-4 bg-gray-900" style="border-color: {{ line.color }};"></div>
                <span class="text-gray-600 font-medium">Terminus üöá</span>
            </div>
            <div class="flex items-center space-x-3">
                <div class="w-5 h-5 rounded-full border-4 bg-white" style="border-color: {{ line.color }};"></div>
                <span class="text-gray-600 font-medium">Non visit√©</span>
            </div>
            <div class="flex items-center space-x-3">
                <div class="w-5 h-5 rounded-full border-4 bg-blue-400" style="border-color: {{ line.color }};"></div>
                <span class="text-gray-600 font-medium">Pass√©</span>
            </div>
            <div class="flex items-center space-x-3">
                <div class="w-5 h-5 rounded-full border-4 bg-green-500" style="border-color: {{ line.color }};"></div>
                <span class="text-gray-600 font-medium">Visit√©</span>
            </div>
        </div>
    </div>
</div>
{% endblock %}